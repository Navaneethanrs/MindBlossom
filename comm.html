<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind Blossom | Community Support</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --primary-light: #764ba2;
            --secondary: #f093fb;
            --secondary-light: #f5576c;
            --accent: #4facfe;
            --accent-light: #00f2fe;
            --success: #38ef7d;
            --warning: #ff9a9e;
            --danger: #ff0844;
            --light: #fff;
            --dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.25);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-dark: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --gradient-sunset: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            --gradient-aurora: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --radius-xl: 25px;
            --radius-lg: 20px;
            --radius-md: 15px;
            --radius-sm: 10px;
            --transition-smooth: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-quick: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }

        .bg-particle {
            position: absolute;
            border-radius: 50%;
            background: var(--gradient-primary);
            animation: float 15s infinite linear;
        }

        /* Header */
        .header {
            padding: 1.5rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }

        .logo-text {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
        }

        /* Navigation Links */
        .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition-quick);
            border: 2px solid transparent;
            font-size: 0.9rem;
        }

        .nav-link:hover {
            background: var(--gradient-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            border-color: var(--primary-light);
        }

        .nav-link.active {
            background: var(--gradient-primary);
            border-color: var(--primary-light);
        }

        .nav-link i {
            font-size: 1rem;
        }

        .nav-link span {
            font-size: 0.9rem;
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 8rem 2rem 2rem;
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 3rem;
        }

        /* Glass Cards */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: 2rem;
        }

        /* Post Card */
        .post-card {
            margin-bottom: 2rem;
            transition: var(--transition-quick);
            position: relative;
            overflow: hidden;
        }

        .post-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .user-info h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .post-time {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .post-content {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            margin-bottom: 1.5rem;
            line-height: 1.6;
            position: relative;
        }

        .post-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-sm) 0 0 var(--radius-sm);
        }

        /* Mood Badge */
        .mood-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            background: var(--gradient-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            animation: moodGlow 2s infinite alternate;
        }

        @keyframes moodGlow {
            from {
                box-shadow: 0 0 10px rgba(240, 147, 251, 0.3);
            }
            to {
                box-shadow: 0 0 20px rgba(240, 147, 251, 0.6);
            }
        }

        /* Reactions */
        .reactions-container {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .reaction-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.7rem 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: var(--radius-lg);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition-quick);
        }

        .reaction-btn:hover {
            background: var(--gradient-primary);
            transform: translateY(-3px);
        }

        .reaction-btn.active {
            background: var(--gradient-primary);
            animation: reactionPulse 0.3s ease-out;
        }

        @keyframes reactionPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Comments Section */
        .comments-container {
            margin-top: 2rem;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 1rem;
        }

        /* Floating Comments */
        .floating-comment {
            position: fixed;
            z-index: 10000;
            pointer-events: none;
            animation: floatUp 15s linear forwards;
            opacity: 0;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(10deg);
                opacity: 0;
            }
        }

        .comment-bubble {
            background: var(--gradient-primary);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            max-width: 300px;
            position: relative;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .comment-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: var(--primary) transparent transparent;
        }

        /* Comment Card */
        .comment-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            padding: 1.2rem;
            margin-bottom: 1rem;
            transition: var(--transition-quick);
            position: relative;
            border-left: 3px solid var(--primary);
        }

        .comment-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .comment-user {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .comment-user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--gradient-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .comment-actions {
            display: flex;
            gap: 0.8rem;
        }

        .comment-action-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: var(--transition-quick);
            padding: 0.3rem;
            border-radius: var(--radius-sm);
        }

        .comment-action-btn:hover {
            color: var(--light);
            background: rgba(255, 255, 255, 0.1);
        }

        .comment-content {
            margin-bottom: 0.8rem;
            line-height: 1.5;
        }

        .comment-editor {
            display: none;
            margin-top: 1rem;
        }

        .comment-edit-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary);
            border-radius: var(--radius-md);
            color: var(--light);
            font-family: 'Poppins', sans-serif;
            margin-bottom: 1rem;
        }

        .edit-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Emoji Picker */
        .emoji-picker {
            position: absolute;
            bottom: 100%;
            right: 0;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-md);
            padding: 1rem;
            display: none;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
            width: 250px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--glass-border);
            z-index: 1000;
        }

        .emoji-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            transition: var(--transition-quick);
        }

        .emoji-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.2);
        }

        /* New Comment Input */
        .new-comment {
            margin-top: 2rem;
            position: relative;
        }

        .new-comment-input {
            width: 100%;
            padding: 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            color: var(--light);
            font-family: 'Poppins', sans-serif;
            resize: none;
            min-height: 100px;
            transition: var(--transition-quick);
        }

        .new-comment-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .new-comment-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .emoji-toggle-btn {
            background: var(--gradient-primary);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition-quick);
        }

        .emoji-toggle-btn:hover {
            transform: scale(1.1) rotate(15deg);
        }

        .submit-comment-btn {
            background: var(--gradient-secondary);
            border: none;
            padding: 0.8rem 2rem;
            border-radius: var(--radius-lg);
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition-quick);
        }

        .submit-comment-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(240, 147, 251, 0.3);
        }

        /* Stats Panel */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition-quick);
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Filter Section */
        .filter-section {
            margin-bottom: 2rem;
        }

        .filter-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: var(--radius-lg);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition-quick);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-btn:hover {
            background: var(--gradient-primary);
            transform: translateY(-3px);
        }

        .filter-btn.active {
            background: var(--gradient-primary);
        }

        /* Quotes Panel */
        .quotes-panel {
            margin-top: 0;
        }

        .quote-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: var(--transition-quick);
            border-left: 4px solid var(--accent);
        }

        .quote-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .quote-text {
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .quote-author {
            text-align: right;
            font-weight: 600;
            color: var(--accent);
            font-size: 0.9rem;
        }

        .quote-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--accent);
        }

        /* Support Buttons */
        .support-btn {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: var(--radius-md);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition-quick);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .support-btn:hover {
            background: var(--gradient-primary);
            transform: translateY(-5px);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .main-container {
                padding: 10rem 1rem 2rem;
            }
            
            .stats-panel {
                grid-template-columns: 1fr;
            }
            
            .filter-buttons {
                justify-content: center;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 4px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            padding: 1.5rem 2rem;
            background: var(--gradient-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 10000;
            animation: slideInRight 0.5s ease-out, fadeOut 0.5s ease-in 2.5s forwards;
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 400px;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        /* Shimmer Effect */
        .shimmer {
            position: relative;
            overflow: hidden;
        }

        .shimmer::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to right,
                transparent 0%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 100%
            );
            transform: rotate(30deg);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) rotate(30deg);
            }
            100% {
                transform: translateX(100%) rotate(30deg);
            }
        }

        /* Floating Hearts */
        .floating-heart {
            position: fixed;
            font-size: 1.5rem;
            z-index: 100;
            pointer-events: none;
            animation: floatHeart 5s linear forwards;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Page Transition */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-dark);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pageTransitionOut 0.8s ease-out 0.5s forwards;
        }

        .transition-text {
            font-family: 'Montserrat', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textGlow 2s infinite alternate;
        }

        @keyframes pageTransitionOut {
            to {
                transform: translateY(-100%);
                opacity: 0;
            }
        }

        @keyframes textGlow {
            from {
                filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.5));
            }
            to {
                filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.8));
            }
        }

        /* Back Button */
        .back-btn {
            position: fixed;
            top: 120px;
            left: 30px;
            background: var(--gradient-primary);
            color: var(--light);
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition-quick);
            z-index: 1000;
        }

        .back-btn:hover {
            transform: translateX(-5px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg" id="animatedBg"></div>
    
    <!-- Page Transition -->
    <div class="page-transition">
        <div class="transition-text">Community Garden</div>
    </div>

    <!-- Back Button -->
    <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
        Back to Sharing
    </button>

    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="logo-text">Community Garden</div>
        </div>
        
        <!-- Navigation Links -->
        <nav class="nav-links">
            <a href="home.html" class="nav-link">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="counseller.html" class="nav-link">
                <i class="fas fa-user-md"></i>
                <span>Counselor</span>
            </a>
            <a href="game.html" class="nav-link">
                <i class="fas fa-gamepad"></i>
                <span>Games</span>
            </a>
            <a href="comm.html" class="nav-link active">
                <i class="fas fa-users"></i>
                <span>Community</span>
            </a>
        </nav>
        
        <div class="header-stats">
            <div style="display: flex; gap: 2rem; align-items: center;">
                <div>
                    <div style="font-size: 0.9rem; opacity: 0.7;">Active Supporters</div>
                    <div style="font-size: 1.5rem; font-weight: 700;" id="activeCount">247</div>
                </div>
                <div>
                    <div style="font-size: 0.9rem; opacity: 0.7;">Posts Today</div>
                    <div style="font-size: 1.5rem; font-weight: 700;" id="postsToday">42</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Side - Community Feed -->
        <div>
            <!-- Stats Panel -->
            <div class="stats-panel">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-value" id="totalSupport">1,245</div>
                    <div>Hearts Given</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="stat-value" id="totalComments">893</div>
                    <div>Supportive Comments</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-hands"></i>
                    </div>
                    <div class="stat-value" id="totalHugs">567</div>
                    <div>Virtual Hugs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <div class="stat-value" id="totalPosts">328</div>
                    <div>Blossoms Shared</div>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <h2 style="margin-bottom: 1.5rem; font-size: 1.8rem;">Community Feed</h2>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-globe"></i> All
                    </button>
                    <button class="filter-btn" data-filter="happy">
                        <i class="fas fa-smile"></i> Happy
                    </button>
                    <button class="filter-btn" data-filter="sad">
                        <i class="fas fa-frown"></i> Sad
                    </button>
                    <button class="filter-btn" data-filter="angry">
                        <i class="fas fa-angry"></i> Angry
                    </button>
                    <button class="filter-btn" data-filter="anxious">
                        <i class="fas fa-wind"></i> Anxious
                    </button>
                </div>
            </div>

            <!-- Posts Container -->
            <div id="postsContainer">
                <!-- Posts will be loaded here -->
            </div>
        </div>

        <!-- Right Side - Community Info -->
        <div>
            <!-- Quotes Panel -->
            <div class="glass-card quotes-panel">
                <h2 style="margin-bottom: 1.5rem; font-size: 1.8rem;">
                    <i class="fas fa-quote-left"></i> Daily Inspiration
                </h2>
                <div class="quote-board" id="quoteBoard">
                    <!-- Quotes will be populated by JavaScript -->
                </div>
            </div>

            <!-- Quick Support -->
            <div class="glass-card" style="margin-top: 2rem;">
                <h2 style="margin-bottom: 1.5rem; font-size: 1.8rem;">
                    <i class="fas fa-hand-holding-heart"></i> Quick Support
                </h2>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <button class="support-btn" data-support="hug">
                        <i class="fas fa-hands"></i> Send Hug
                    </button>
                    <button class="support-btn" data-support="heart">
                        <i class="fas fa-heart"></i> Send Love
                    </button>
                    <button class="support-btn" data-support="flower">
                        <i class="fas fa-seedling"></i> Send Flower
                    </button>
                    <button class="support-btn" data-support="star">
                        <i class="fas fa-star"></i> Send Star
                    </button>
                </div>
            </div>

            <!-- Community Guidelines -->
            <div class="glass-card" style="margin-top: 2rem;">
                <h2 style="margin-bottom: 1.5rem; font-size: 1.8rem;">
                    <i class="fas fa-shield-alt"></i> Safe Space Rules
                </h2>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <i class="fas fa-check" style="position: absolute; left: 0; color: #38ef7d;"></i>
                        Be kind and supportive
                    </li>
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <i class="fas fa-check" style="position: absolute; left: 0; color: #38ef7d;"></i>
                        Respect anonymity
                    </li>
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <i class="fas fa-check" style="position: absolute; left: 0; color: #38ef7d;"></i>
                        No judgment allowed
                    </li>
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <i class="fas fa-check" style="position: absolute; left: 0; color: #38ef7d;"></i>
                        Listen with empathy
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div class="emoji-picker" id="emojiPicker"></div>

    <script>
        // Community Data
        let posts = [];
        let currentFilter = 'all';
        let emojiPickerVisible = false;
        let currentEditingComment = null;

        // Initialize Page
        document.addEventListener('DOMContentLoaded', () => {
            initializeBackground();
            loadPosts();
            setupEventListeners();
            startFloatingComments();
            updateCommunityStats();
            createFloatingHearts();
            loadInspirationalQuotes();
            
            // Hide page transition after load
            setTimeout(() => {
                document.querySelector('.page-transition').style.display = 'none';
            }, 1500);
        });

        // Initialize Animated Background
        function initializeBackground() {
            const bg = document.getElementById('animatedBg');
            const particleCount = 30; // Reduced for better performance
            bg.innerHTML = ''; // Clear existing particles
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'bg-particle';
                
                const size = Math.random() * 8 + 2;
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const delay = Math.random() * 15;
                const duration = Math.random() * 20 + 10;
                const colors = [
                    'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                    'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
                ];
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${left}%`;
                particle.style.top = `${top}%`;
                particle.style.background = color;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                bg.appendChild(particle);
            }
        }

        // Load Inspirational Quotes
        function loadInspirationalQuotes() {
            const quotes = [
                {
                    text: "You are not a drop in the ocean. You are the entire ocean in a drop.",
                    author: "Rumi"
                },
                {
                    text: "The wound is the place where the Light enters you.",
                    author: "Rumi"
                },
                {
                    text: "You yourself, as much as anybody in the entire universe, deserve your love and affection.",
                    author: "Buddha"
                },
                {
                    text: "Mental health is not a destination, but a process. It's about how you drive, not where you're going.",
                    author: "Noam Shpancer"
                },
                {
                    text: "What mental health needs is more sunlight, more candor, and more unashamed conversation.",
                    author: "Glenn Close"
                },
                {
                    text: "Healing takes time, and asking for help is a courageous step.",
                    author: "Mariska Hargitay"
                },
                {
                    text: "Your present circumstances don't determine where you can go; they merely determine where you start.",
                    author: "Nido Qubein"
                },
                {
                    text: "The secret of getting ahead is getting started.",
                    author: "Mark Twain"
                },
                {
                    text: "It's okay to not be okay. It's okay to ask for help. It's okay to take your time.",
                    author: "Unknown"
                },
                {
                    text: "Small steps still move you forward. Progress is progress.",
                    author: "Unknown"
                }
            ];

            const quoteBoard = document.getElementById('quoteBoard');
            quoteBoard.innerHTML = '';
            
            // Shuffle and take first 5 quotes
            const shuffledQuotes = [...quotes].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            shuffledQuotes.forEach((quote, index) => {
                const quoteCard = document.createElement('div');
                quoteCard.className = 'quote-card';
                quoteCard.style.animation = `fadeInUp 0.5s ease-out ${index * 0.1}s both`;
                
                quoteCard.innerHTML = `
                    <div class="quote-icon">
                        <i class="fas fa-quote-left"></i>
                    </div>
                    <div class="quote-text">"${quote.text}"</div>
                    <div class="quote-author">â€” ${quote.author}</div>
                `;
                
                quoteBoard.appendChild(quoteCard);
            });

            // Rotate quotes every 30 seconds
            setInterval(() => {
                loadInspirationalQuotes();
            }, 30000);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFilter = btn.dataset.filter;
                    renderPosts();
                });
            });

            // Support buttons
            document.querySelectorAll('.support-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const supportType = btn.dataset.support;
                    sendSupport(supportType);
                });
            });

            // Emoji picker
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.emoji-toggle-btn') && !e.target.closest('.emoji-picker')) {
                    hideEmojiPicker();
                }
            });

            // Prevent default form behavior
            document.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    if (btn.type === 'button') {
                        e.preventDefault();
                    }
                });
            });
        }

        // Load Posts
        function loadPosts() {
            // Load from localStorage or use sample data
            try {
                const savedPosts = JSON.parse(localStorage.getItem('mindBlossomPosts') || '[]');
                
                if (savedPosts.length > 0) {
                    posts = savedPosts;
                } else {
                    // No sample posts - start with empty array
                    posts = [];
                }
            } catch (error) {
                console.error('Error loading posts:', error);
                posts = [];
            }
            
            renderPosts();
        }

        // Render Posts
        function renderPosts() {
            const container = document.getElementById('postsContainer');
            if (!container) return;
            
            const filteredPosts = currentFilter === 'all' ? posts : posts.filter(post => post.mood === currentFilter);
            
            if (filteredPosts.length === 0) {
                container.innerHTML = `
                    <div class="glass-card" style="text-align: center; padding: 3rem;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸŒ±</div>
                        <h3 style="margin-bottom: 1rem;">No posts yet</h3>
                        <p>Be the first to share your feelings and start the conversation!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredPosts.map((post, index) => {
                const timeAgo = getTimeAgo(post.timestamp);
                const moodEmoji = getMoodEmoji(post.mood);
                const totalReactions = Object.values(post.reactions || {}).reduce((a, b) => a + b, 0);
                
                return `
                    <div class="glass-card post-card" data-post-id="${post.id}" style="animation: fadeInUp 0.5s ease-out ${index * 0.1}s both;">
                        <div class="mood-badge">
                            ${moodEmoji} ${post.mood ? post.mood.charAt(0).toUpperCase() + post.mood.slice(1) : 'Shared'}
                        </div>
                        
                        <div class="post-header">
                            <div class="user-avatar">${post.avatar}</div>
                            <div class="user-info">
                                <h3>${post.userId}</h3>
                                <div class="post-time">${timeAgo}</div>
                            </div>
                        </div>
                        
                        <div class="post-content">
                            ${post.text}
                        </div>
                        
                        <div class="reactions-container">
                            <button class="reaction-btn" onclick="addReactionDirect('${post.id}', 'heart')">
                                <i class="fas fa-heart"></i>
                                <span>${(post.reactions || {}).heart || 0}</span>
                            </button>
                            <button class="reaction-btn" onclick="addReactionDirect('${post.id}', 'hug')">
                                <i class="fas fa-hands"></i>
                                <span>${(post.reactions || {}).hug || 0}</span>
                            </button>
                            <button class="reaction-btn" onclick="addReactionDirect('${post.id}', 'flower')">
                                <i class="fas fa-seedling"></i>
                                <span>${(post.reactions || {}).flower || 0}</span>
                            </button>
                            <button class="reaction-btn" onclick="addReactionDirect('${post.id}', 'star')">
                                <i class="fas fa-star"></i>
                                <span>${(post.reactions || {}).star || 0}</span>
                            </button>
                            <button class="reaction-btn" onclick="toggleCommentSectionDirect('${post.id}')">
                                <i class="fas fa-comment"></i>
                                <span>${(post.comments || []).length}</span>
                            </button>
                        </div>
                        
                        <div class="comments-container" id="comments-${post.id}" style="display: none;">
                            ${(post.comments || []).map(comment => `
                                <div class="comment-card" data-comment-id="${comment.id}">
                                    <div class="comment-header">
                                        <div class="comment-user">
                                            <div class="comment-user-avatar">${comment.userId ? comment.userId.charAt(0) : '?'}</div>
                                            <div>
                                                <div style="font-weight: 600;">${comment.userId}</div>
                                                <div style="font-size: 0.8rem; opacity: 0.7;">${getTimeAgo(comment.timestamp)}</div>
                                            </div>
                                        </div>
                                        ${comment.userId === 'Blossom 1' ? `
                                            <div class="comment-actions">
                                                <button class="comment-action-btn" onclick="editComment(${post.id}, ${comment.id})">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="comment-action-btn" onclick="deleteComment(${post.id}, ${comment.id})">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        ` : ''}
                                    </div>
                                    <div class="comment-content" id="comment-content-${comment.id}">${comment.text}</div>
                                    <div class="comment-editor" id="comment-editor-${comment.id}">
                                        <textarea class="comment-edit-input" id="edit-input-${comment.id}">${comment.text}</textarea>
                                        <div class="edit-actions">
                                            <button class="comment-action-btn" onclick="saveCommentEdit(${post.id}, ${comment.id})">Save</button>
                                            <button class="comment-action-btn" onclick="cancelCommentEdit(${post.id}, ${comment.id})">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                            
                            <div class="new-comment">
                                <textarea class="new-comment-input" id="new-comment-${post.id}" placeholder="Write a supportive comment..."></textarea>
                                <div class="new-comment-actions">
                                    <button class="emoji-toggle-btn" onclick="toggleEmojiPicker(${post.id})">
                                        <i class="far fa-smile"></i>
                                    </button>
                                    <button class="submit-comment-btn shimmer" onclick="addComment(${post.id})">
                                        <i class="fas fa-paper-plane"></i>
                                        Send Support
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Get Time Ago
        function getTimeAgo(timestamp) {
            try {
                const seconds = Math.floor((new Date() - new Date(timestamp)) / 1000);
                
                if (seconds < 60) return 'Just now';
                if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
                if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
                if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;
                
                return new Date(timestamp).toLocaleDateString();
            } catch (error) {
                return 'Recently';
            }
        }

        // Get Mood Emoji
        function getMoodEmoji(mood) {
            const emojis = {
                happy: 'ðŸ˜Š',
                sad: 'ðŸ˜¢',
                angry: 'ðŸ˜ ',
                anxious: 'ðŸ˜°',
                stressed: 'ðŸ˜«',
                hopeful: 'ðŸŒˆ',
                neutral: 'ðŸ˜'
            };
            return emojis[mood] || 'ðŸ˜Š';
        }

        // Test Function - Check if buttons work
        function testButton() {
            console.log('ðŸ” Test button clicked!');
            showNotification('âœ… Test button works!', 'success');
        }

        // Direct Reaction Function
        function addReactionDirect(postId, reaction) {
            console.log('ðŸ” Direct reaction called:', postId, reaction);
            
            // Convert postId to number if it's a string
            const postIdNum = typeof postId === 'string' ? parseInt(postId) : postId;
            
            // Call the main addReaction function
            addReaction(postIdNum, reaction);
        }

        // Direct Comment Toggle Function
        function toggleCommentSectionDirect(postId) {
            console.log('ðŸ” Direct comment toggle called:', postId);
            
            // Convert postId to number if it's a string
            const postIdNum = typeof postId === 'string' ? parseInt(postId) : postId;
            
            // Call the main toggleCommentSection function
            toggleCommentSection(postIdNum);
        }

        // Handle Reaction Click
        function handleReactionClick(button) {
            try {
                console.log('ðŸ” Reaction button clicked:', button);
                
                const postId = button.getAttribute('data-post-id');
                const reaction = button.getAttribute('data-reaction');
                
                console.log('ðŸ” Extracted data:', { postId, reaction });
                
                if (!postId || !reaction) {
                    console.error('âŒ Missing data attributes');
                    return;
                }
                
                // Convert to number if needed
                const postIdNum = parseInt(postId);
                addReaction(postIdNum, reaction);
                
            } catch (error) {
                console.error('âŒ Error handling reaction click:', error);
                showNotification('Error adding reaction. Please try again.', 'error');
            }
        }

        // Handle Comment Click
        function handleCommentClick(button) {
            try {
                console.log('ðŸ” Comment button clicked:', button);
                
                const postId = button.getAttribute('data-post-id');
                
                if (!postId) {
                    console.error('âŒ Missing post ID');
                    return;
                }
                
                // Convert to number if needed
                const postIdNum = parseInt(postId);
                toggleCommentSection(postIdNum);
                
            } catch (error) {
                console.error('âŒ Error handling comment click:', error);
            }
        }

        // Add Reaction - SAVING TO MONGODB
        async function addReaction(postId, reaction) {
            try {
                console.log('ðŸ” Adding reaction:', { postId, reaction });
                
                const post = posts.find(p => p.id === postId);
                if (!post) {
                    console.error('âŒ Post not found:', postId);
                    return;
                }
                
                if (!post.reactions) post.reactions = {};
                post.reactions[reaction] = (post.reactions[reaction] || 0) + 1;
                
                // Update localStorage first
                localStorage.setItem('mindBlossomPosts', JSON.stringify(posts));
                console.log('âœ… Updated localStorage');
                
                // Update UI immediately - just the count
                const countElement = document.getElementById(`${reaction}-count-${postId}`);
                if (countElement) {
                    countElement.textContent = post.reactions[reaction];
                    countElement.parentElement.classList.add('active');
                    setTimeout(() => {
                        countElement.parentElement.classList.remove('active');
                    }, 300);
                }
                
                // Try to save to MongoDB
                try {
                    const response = await fetch('http://localhost:3000/api/reaction', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            postId: postId,
                            reaction: reaction,
                            userId: getRandomUsername()
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        console.log('âœ… Reaction saved to MongoDB:', result);
                    } else {
                        console.log('âš ï¸ MongoDB response not ok:', response.status);
                    }
                } catch (error) {
                    console.log('âš ï¸ MongoDB save failed, using localStorage only:', error.message);
                }
                
                // Show floating reaction
                createFloatingReaction(reaction);
                
                // Update stats
                updateCommunityStats();
                
                // Show notification
                showNotification(`ðŸ’– You sent ${reaction} support!`);
                
            } catch (error) {
                console.error('âŒ Error adding reaction:', error);
                showNotification('Error adding reaction. Please try again.', 'error');
            }
        }

        // Toggle Comment Section
        function toggleCommentSection(postId) {
            try {
                console.log('ðŸ” Toggling comment section for post:', postId);
                
                const commentsDiv = document.getElementById(`comments-${postId}`);
                if (!commentsDiv) {
                    console.error('âŒ Comments div not found:', `comments-${postId}`);
                    return;
                }
                
                const isHidden = commentsDiv.style.display === 'none' || commentsDiv.style.display === '';
                commentsDiv.style.display = isHidden ? 'block' : 'none';
                
                if (isHidden) {
                    setTimeout(() => {
                        commentsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                }
                
                console.log('âœ… Comment section toggled:', isHidden ? 'opened' : 'closed');
            } catch (error) {
                console.error('âŒ Error toggling comment section:', error);
            }
        }

        // Add Comment - SAVING TO MONGODB
        async function addComment(postId) {
            try {
                console.log('ðŸ” Adding comment to post:', postId);
                
                const input = document.getElementById(`new-comment-${postId}`);
                if (!input) {
                    console.error('âŒ Comment input not found:', `new-comment-${postId}`);
                    return;
                }
                
                const text = input.value.trim();
                
                if (!text) {
                    showNotification('Please write a comment first!', 'warning');
                    return;
                }
                
                const post = posts.find(p => p.id === postId);
                if (!post) {
                    console.error('âŒ Post not found:', postId);
                    return;
                }
                
                if (!post.comments) post.comments = [];
                
                const newComment = {
                    id: Date.now(),
                    userId: getRandomUsername(),
                    text: text,
                    timestamp: new Date().toISOString()
                };
                
                post.comments.push(newComment);
                
                // Update localStorage first
                localStorage.setItem('mindBlossomPosts', JSON.stringify(posts));
                console.log('âœ… Updated localStorage with new comment');
                
                // Update comment count immediately
                const commentCountElement = document.getElementById(`comment-count-${postId}`);
                if (commentCountElement) {
                    commentCountElement.textContent = post.comments.length;
                }
                
                // Clear input
                input.value = '';
                
                // Try to save to MongoDB
                try {
                    const response = await fetch('http://localhost:3000/api/comment', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            postId: postId,
                            comment: newComment
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        console.log('âœ… Comment saved to MongoDB:', result);
                    } else {
                        console.log('âš ï¸ MongoDB response not ok:', response.status);
                    }
                } catch (error) {
                    console.log('âš ï¸ MongoDB save failed, using localStorage only:', error.message);
                }
                
                // Update comments section if it's open
                const commentsContainer = document.getElementById(`comments-${postId}`);
                if (commentsContainer && commentsContainer.style.display !== 'none') {
                    renderPosts(); // Only re-render if comments are visible
                }
                
                // Show floating comment
                createFloatingComment(text);
                
                // Update stats
                updateCommunityStats();
                
                // Show notification
                showNotification('ðŸ’¬ Your supportive comment was added!');
                
            } catch (error) {
                console.error('âŒ Error adding comment:', error);
                showNotification('Error adding comment. Please try again.', 'error');
            }
        }

        // Edit Comment
        function editComment(postId, commentId) {
            try {
                // Hide all other editors
                document.querySelectorAll('.comment-editor').forEach(editor => {
                    editor.style.display = 'none';
                });
                
                // Show content editor
                const editor = document.getElementById(`comment-editor-${commentId}`);
                const content = document.getElementById(`comment-content-${commentId}`);
                
                if (!editor || !content) return;
                
                content.style.display = 'none';
                editor.style.display = 'block';
                
                currentEditingComment = { postId, commentId };
            } catch (error) {
                console.error('Error editing comment:', error);
            }
        }

        // Save Comment Edit
        function saveCommentEdit(postId, commentId) {
            try {
                const input = document.getElementById(`edit-input-${commentId}`);
                if (!input) return;
                
                const newText = input.value.trim();
                
                if (!newText) {
                    showNotification('Comment cannot be empty!', 'warning');
                    return;
                }
                
                const post = posts.find(p => p.id === postId);
                if (!post) return;
                
                const comment = post.comments.find(c => c.id === commentId);
                if (!comment) return;
                
                comment.text = newText;
                comment.edited = true;
                
                // Update localStorage
                localStorage.setItem('mindBlossomPosts', JSON.stringify(posts));
                
                // Update UI
                renderPosts();
                
                // Show notification
                showNotification('âœ… Comment updated successfully!');
                
                currentEditingComment = null;
            } catch (error) {
                console.error('Error saving comment edit:', error);
            }
        }

        // Cancel Comment Edit
        function cancelCommentEdit(postId, commentId) {
            try {
                const editor = document.getElementById(`comment-editor-${commentId}`);
                const content = document.getElementById(`comment-content-${commentId}`);
                
                if (!editor || !content) return;
                
                editor.style.display = 'none';
                content.style.display = 'block';
                
                currentEditingComment = null;
            } catch (error) {
                console.error('Error canceling comment edit:', error);
            }
        }

        // Delete Comment
        function deleteComment(postId, commentId) {
            if (!confirm('Are you sure you want to delete this comment?')) return;
            
            try {
                const post = posts.find(p => p.id === postId);
                if (!post) return;
                
                const commentIndex = post.comments.findIndex(c => c.id === commentId);
                if (commentIndex === -1) return;
                
                post.comments.splice(commentIndex, 1);
                
                // Update localStorage
                localStorage.setItem('mindBlossomPosts', JSON.stringify(posts));
                
                // Update UI
                renderPosts();
                
                // Show notification
                showNotification('ðŸ—‘ï¸ Comment deleted');
                
                // Update stats
                updateCommunityStats();
            } catch (error) {
                console.error('Error deleting comment:', error);
            }
        }

        // Get Random Username
        function getRandomUsername() {
            const adjectives = ['Gentle', 'Kind', 'Wise', 'Brave', 'Calm', 'Bright', 'Peaceful', 'Hopeful'];
            const nouns = ['Soul', 'Heart', 'Spirit', 'Mind', 'Friend', 'Guide', 'Listener', 'Helper'];
            const number = Math.floor(Math.random() * 99) + 1;
            
            return `${adjectives[Math.floor(Math.random() * adjectives.length)]}${nouns[Math.floor(Math.random() * nouns.length)]}${number}`;
        }

        // Update Community Stats
        function updateCommunityStats() {
            try {
                const totalHeart = posts.reduce((sum, post) => sum + ((post.reactions || {}).heart || 0), 0);
                const totalHug = posts.reduce((sum, post) => sum + ((post.reactions || {}).hug || 0), 0);
                const totalComments = posts.reduce((sum, post) => sum + ((post.comments || []).length), 0);
                const totalPostsCount = posts.length;
                
                const totalSupportEl = document.getElementById('totalSupport');
                const totalCommentsEl = document.getElementById('totalComments');
                const totalHugsEl = document.getElementById('totalHugs');
                const totalPostsEl = document.getElementById('totalPosts');
                
                if (totalSupportEl) totalSupportEl.textContent = totalHeart + totalHug;
                if (totalCommentsEl) totalCommentsEl.textContent = totalComments;
                if (totalHugsEl) totalHugsEl.textContent = totalHug;
                if (totalPostsEl) totalPostsEl.textContent = totalPostsCount;
                
                // Update active count with random fluctuation
                const activeCount = Math.floor(Math.random() * 50) + 200;
                const activeCountEl = document.getElementById('activeCount');
                if (activeCountEl) activeCountEl.textContent = activeCount;
                
                // Update posts today
                const postsToday = Math.floor(Math.random() * 20) + 30;
                const postsTodayEl = document.getElementById('postsToday');
                if (postsTodayEl) postsTodayEl.textContent = postsToday;
            } catch (error) {
                console.error('Error updating stats:', error);
            }
        }

        // Send Support
        function sendSupport(type) {
            try {
                // Select a random post to support
                if (posts.length === 0) return;
                
                const randomPost = posts[Math.floor(Math.random() * posts.length)];
                addReaction(randomPost.id, type);
                
                // Create floating support animation
                createFloatingSupport(type);
            } catch (error) {
                console.error('Error sending support:', error);
            }
        }

        // Toggle Emoji Picker
        function toggleEmojiPicker(postId) {
            try {
                const picker = document.getElementById('emojiPicker');
                const input = document.getElementById(`new-comment-${postId}`);
                
                if (!picker || !input) return;
                
                if (emojiPickerVisible) {
                    hideEmojiPicker();
                    return;
                }
                
                // Position picker near input
                const inputRect = input.getBoundingClientRect();
                picker.style.bottom = `${window.innerHeight - inputRect.top + 10}px`;
                picker.style.right = `${window.innerWidth - inputRect.right}px`;
                
                // Populate emojis
                const emojis = ['ðŸ˜Š', 'ðŸ˜‚', 'ðŸ¥°', 'ðŸ˜¢', 'ðŸ˜ ', 'ðŸ˜', 'ðŸ¤—', 'ðŸ‘', 'ðŸŽ‰', 'ðŸŒˆ', 'ðŸŒŸ', 'ðŸ’•', 'ðŸŒ¸', 'ðŸŒ»', 'ðŸƒ', 'ðŸŒŠ', 'âœ¨', 'ðŸ’ª', 'ðŸ™', 'ðŸ¤'];
                picker.innerHTML = emojis.map(emoji => `
                    <button class="emoji-btn" onclick="insertEmoji('${emoji}', ${postId})">${emoji}</button>
                `).join('');
                
                picker.style.display = 'grid';
                emojiPickerVisible = true;
            } catch (error) {
                console.error('Error toggling emoji picker:', error);
            }
        }

        // Hide Emoji Picker
        function hideEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            if (picker) {
                picker.style.display = 'none';
                emojiPickerVisible = false;
            }
        }

        // Insert Emoji
        function insertEmoji(emoji, postId) {
            try {
                const input = document.getElementById(`new-comment-${postId}`);
                if (!input) return;
                
                const cursorPos = input.selectionStart;
                const text = input.value;
                
                input.value = text.substring(0, cursorPos) + emoji + text.substring(cursorPos);
                input.focus();
                input.setSelectionRange(cursorPos + emoji.length, cursorPos + emoji.length);
                
                hideEmojiPicker();
            } catch (error) {
                console.error('Error inserting emoji:', error);
            }
        }

        // Show Notification
        function showNotification(message, type = 'info') {
            try {
                const notification = document.createElement('div');
                notification.className = 'notification';
                
                const icons = {
                    info: 'ðŸ’¡',
                    success: 'âœ¨',
                    warning: 'âš ï¸',
                    error: 'âŒ'
                };
                
                notification.innerHTML = `
                    <div style="font-size: 1.5rem;">${icons[type] || icons.info}</div>
                    <div>${message}</div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 3000);
            } catch (error) {
                console.error('Error showing notification:', error);
            }
        }

        // Start Floating Comments
        function startFloatingComments() {
            setInterval(() => {
                if (Math.random() > 0.7) { // 30% chance every interval
                    createFloatingComment();
                }
            }, 3000);
        }

        // Create Floating Comment
        function createFloatingComment(text = null) {
            try {
                const comment = document.createElement('div');
                comment.className = 'floating-comment';
                
                const messages = [
                    "You're not alone ðŸ’•",
                    "Sending virtual hugs ðŸ¤—",
                    "This too shall pass ðŸŒˆ",
                    "You're stronger than you know ðŸ’ª",
                    "One day at a time ðŸŒŸ",
                    "Your feelings are valid ðŸŒ¸",
                    "Keep going, you're doing great ðŸŽ¯",
                    "Sending positive vibes âœ¨",
                    "We're here for you ðŸ¤",
                    "Take a deep breath ðŸŒŠ"
                ];
                
                const randomMessage = text || messages[Math.floor(Math.random() * messages.length)];
                
                comment.innerHTML = `
                    <div class="comment-bubble">
                        ${randomMessage}
                    </div>
                `;
                
                // Random position
                const left = Math.random() * 80 + 10;
                comment.style.left = `${left}%`;
                
                // Random size and animation
                const scale = Math.random() * 0.5 + 0.5;
                const duration = Math.random() * 10 + 10;
                comment.style.transform = `scale(${scale})`;
                comment.style.animationDuration = `${duration}s`;
                
                document.body.appendChild(comment);
                
                // Remove after animation
                setTimeout(() => {
                    if (comment.parentNode) {
                        comment.parentNode.removeChild(comment);
                    }
                }, duration * 1000);
            } catch (error) {
                console.error('Error creating floating comment:', error);
            }
        }

        // Create Floating Reaction
        function createFloatingReaction(reaction) {
            try {
                const reactions = {
                    heart: 'â¤ï¸',
                    hug: 'ðŸ¤—',
                    flower: 'ðŸŒ¸',
                    star: 'ðŸŒŸ'
                };
                
                const reactionEmoji = reactions[reaction] || 'ðŸ’–';
                
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.className = 'floating-heart';
                        heart.textContent = reactionEmoji;
                        
                        // Random position
                        const left = Math.random() * 80 + 10;
                        heart.style.left = `${left}%`;
                        
                        // Random animation
                        const duration = Math.random() * 3 + 2;
                        heart.style.animationDuration = `${duration}s`;
                        
                        document.body.appendChild(heart);
                        
                        // Remove after animation
                        setTimeout(() => {
                            if (heart.parentNode) {
                                heart.parentNode.removeChild(heart);
                            }
                        }, duration * 1000);
                    }, i * 200);
                }
            } catch (error) {
                console.error('Error creating floating reaction:', error);
            }
        }

        // Create Floating Hearts
        function createFloatingHearts() {
            setInterval(() => {
                if (Math.random() > 0.5) {
                    try {
                        const heart = document.createElement('div');
                        heart.className = 'floating-heart';
                        heart.textContent = ['â¤ï¸', 'ðŸ’•', 'ðŸ’–', 'ðŸ’—', 'ðŸ’“'][Math.floor(Math.random() * 5)];
                        
                        // Random position
                        const left = Math.random() * 90 + 5;
                        heart.style.left = `${left}%`;
                        
                        // Random animation
                        const duration = Math.random() * 4 + 3;
                        heart.style.animationDuration = `${duration}s`;
                        
                        document.body.appendChild(heart);
                        
                        // Remove after animation
                        setTimeout(() => {
                            if (heart.parentNode) {
                                heart.parentNode.removeChild(heart);
                            }
                        }, duration * 1000);
                    } catch (error) {
                        console.error('Error creating floating heart:', error);
                    }
                }
            }, 2000);
        }

        // Create Floating Support
        function createFloatingSupport(type) {
            try {
                const supports = {
                    hug: 'ðŸ¤—',
                    heart: 'â¤ï¸',
                    flower: 'ðŸŒ¸',
                    star: 'ðŸŒŸ'
                };
                
                const supportEmoji = supports[type] || 'ðŸ’–';
                
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const element = document.createElement('div');
                        element.className = 'floating-heart';
                        element.textContent = supportEmoji;
                        
                        // Random position
                        const left = Math.random() * 80 + 10;
                        element.style.left = `${left}%`;
                        
                        // Random animation
                        const duration = Math.random() * 2 + 1;
                        element.style.animationDuration = `${duration}s`;
                        element.style.fontSize = `${Math.random() * 1 + 1.5}rem`;
                        
                        document.body.appendChild(element);
                        
                        // Remove after animation
                        setTimeout(() => {
                            if (element.parentNode) {
                                element.parentNode.removeChild(element);
                            }
                        }, duration * 1000);
                    }, i * 100);
                }
            } catch (error) {
                console.error('Error creating floating support:', error);
            }
        }

        // Go Back to Page 1
        function goBack() {
            try {
                const transition = document.querySelector('.page-transition');
                if (transition) {
                    transition.style.display = 'flex';
                }
                
                setTimeout(() => {
                    window.location.href = 'home.html';
                }, 1000);
            } catch (error) {
                console.error('Error going back:', error);
                window.location.href = 'home.html';
            }
        }
    </script>
</body>
</html>